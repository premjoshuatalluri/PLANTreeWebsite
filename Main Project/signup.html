<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlanTree-SignIn</title>
    <link rel="stylesheet" href="signin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;600;700&family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400&family=Poppins:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/290e127166.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <div class="form-box">
            <h1 id="title">Sign Up</h1>
            <form>
                <div class="input-group">
                    <div class="input-field" id="nameField">
                        <i class="fa-solid fa-user"></i>
                        <input type="text" placeholder="User Name" id="username">
                        <p id="usernameError" style="color:red;"></p>
                    </div>
                    <div class="input-field">
                        <i class="fa-solid fa-envelope"></i>
                        <input type="email" placeholder="Email" id="email">
                        <p id="emailError" style="color:red;"></p>
                    </div>
                    <div class="input-field">
                        <i class="fa-solid fa-lock"></i>
                        <input type="password" placeholder="Password" id="password">
                        <p id="passwordError" style="color:red;"></p>
                    </div>
                    <p>Forgot Password <a href="#">Click here!</a></p>
                </div>
                <div class="btn-field">
                    <button type="button" id="signupBtn">Sign up</button>
                    <button type="button" id="signinBtn" class="disable">Sign in</button>
                </div>
            </form>
        </div>
    </div>
    <script>
      const setError = (elementId, message) => {
        document.getElementById(elementId).textContent = message;
        document.getElementById(elementId.replace("Error", "")).parentElement.classList.add('error-border');
        document.getElementById(elementId.replace("Error", "")).parentElement.classList.remove('success-border');
      }

      const setSuccess = (elementId) => {
        document.getElementById(elementId).textContent = '';
        document.getElementById(elementId.replace("Error", "")).parentElement.classList.add('success-border');
        document.getElementById(elementId.replace("Error", "")).parentElement.classList.remove('error-border');
      }

      const isValidEmail = email => {
          const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
          return re.test(String(email).toLowerCase());
      }

      function validateForm() {
          const username = document.getElementById("username").value;
          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;
          let isValid = true;

          if (title.innerHTML === "Sign Up") {
              if (!username || username.length < 4) {
                  setError("usernameError", 'Username is required and must be at least 4 characters.');
                  isValid = false;
              } else {
                  setSuccess("usernameError");
              }
          }

          if (!email) {
              setError("emailError", 'Email is required');
              isValid = false;
          } else if (!isValidEmail(email)) {
              setError("emailError", 'Provide a valid email address');
              isValid = false;
          } else {
              setSuccess("emailError");
          }

          if (!password || password.length < 6) {
              setError("passwordError", 'Password is required and must be at least 6 characters long.');
              isValid = false;
          } else {
              setSuccess("passwordError");
          }

          return isValid;
      }

      let signupBtn = document.getElementById("signupBtn");
      let signinBtn = document.getElementById("signinBtn");
      let nameField = document.getElementById("nameField");
      let title = document.getElementById("title");

      signinBtn.onclick = function () {
          nameField.style.maxHeight = "0";
          title.innerHTML = "Sign in";
          signupBtn.classList.add('disable');
          signinBtn.classList.remove('disable');
      }

      signupBtn.onclick = function () {
          nameField.style.maxHeight = "60px";
          title.innerHTML = "Sign up";
          signupBtn.classList.remove('disable');
          signinBtn.classList.add('disable');
      }

      document.getElementById("signupBtn").addEventListener("click", function () {
          if (validateForm()) {
              alert("Form is valid!");
          }
      });

    </script>
</body>

</html>
